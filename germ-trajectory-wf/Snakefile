rule all: 
    input:
        "../output/germ-trajectory-wf/umap.feather",
        "../output/germ-trajectory-wf/clusters.feather",
        "../output/germ-trajectory-wf/biomarkers.feather",


rule recluster_germ_cells:
    input: 
        robj="../output/seurat3-cluster-wf/combined_n3.Robj",
        gene_annot = "../references/gene_annotation_dmel_r6-26.feather"
    params: germ_clusters=[6, 4, 2, 0]
    conda: "../envs/seurat3.yaml"
    output: 
        umap="../output/germ-trajectory-wf/umap.feather",
        metadata="../output/germ-trajectory-wf/clusters.feather",
        biomarkers="../output/germ-trajectory-wf/biomarkers.feather",
    script: "scripts/seurat3_recluster.R"

"""Scrip to generate figures and needed material for the Science Submssion.

"""
from pathlib import Path

workdir: '.'
configfile: 'config.yaml'


rule all:
    input:
        'data/clusters.parquet',
        expand('figures/{fig}.svg', fig=['tsne',])


rule clusters:
    input: Path(config['seurat_dir'], 'clusters.tsv').as_posix()
    params:
        resolution=config['resolution'],
    output: 'data/clusters.parquet'
    script: 'scripts/parse_clusters.py'


rule plot_tsne:
    input:
        tsne=Path(config['seurat_dir'], 'tsne.tsv').as_posix(),
        clusters=rules.clusters.output[0]
    output: 'figures/tsne.svg'
    script: 'scripts/plot-tsne.py'

# vim: set ft=python.snakemake
